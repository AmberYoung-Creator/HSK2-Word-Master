<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HSK2 Word Master</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Phosphor Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Noto+Sans+SC:wght@400;500;700&display=swap');
        
        body {
            font-family: 'Nunito', sans-serif;
            background-color: #fef3c7; /* Amber-50 */
            overscroll-behavior: none;
        }
        .zh-text {
            font-family: 'Noto Sans SC', sans-serif;
        }
        .card-perspective {
            perspective: 1000px;
        }
        .card-inner {
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        .card-flipped {
            transform: rotateY(180deg);
        }
        .card-front, .card-back {
            backface-visibility: hidden;
        }
        .card-back {
            transform: rotateY(180deg);
        }
        @keyframes pop {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        .animate-pop {
            animation: pop 0.2s ease-in-out;
        }
        /* Hide scrollbar for clean UI */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>
<body>

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // --- DATA ---
        // Full HSK2 Vocabulary List
        const HSK2_VOCAB = [
            // L01
            { id: 1, lesson: "L01", hanzi: "è§‰å¾—", pinyin: "juÃ©de", en: "to think, to feel", ru: "Ð´ÑƒÐ¼Ð°Ñ‚ÑŒ, Ñ‡ÑƒÐ²ÑÑ‚Ð²Ð¾Ð²Ð°Ñ‚ÑŒ", sentence: "ä½ è§‰å¾—ä¸­å›½èœæ€Žä¹ˆæ ·ï¼Ÿ", chunks: ["ä½ ", "è§‰å¾—", "ä¸­å›½èœ", "æ€Žä¹ˆæ ·"] },
            { id: 2, lesson: "L01", hanzi: "æ—…æ¸¸", pinyin: "lÇšyÃ³u", en: "to travel", ru: "Ð¿ÑƒÑ‚ÐµÑˆÐµÑÑ‚Ð²Ð¾Ð²Ð°Ñ‚ÑŒ", sentence: "æˆ‘æ˜Žå¤©å‡ºå‘åŽ»åŒ—äº¬æ—…æ¸¸ã€‚", chunks: ["æˆ‘", "æ˜Žå¤©", "å‡ºå‘", "åŽ»åŒ—äº¬", "æ—…æ¸¸"] },
            { id: 3, lesson: "L01", hanzi: "å®ƒ", pinyin: "tÄ", en: "it", ru: "Ð¾Ð½Ð¾", sentence: "å®ƒæ˜¯æˆ‘æœ‹å‹çš„å°çŒ«ã€‚", chunks: ["å®ƒæ˜¯", "æˆ‘æœ‹å‹çš„", "å°çŒ«"] },
            { id: 4, lesson: "L01", hanzi: "è¸¢è¶³çƒ", pinyin: "tÄ« zÃºqiÃº", en: "to play football", ru: "Ð¸Ð³Ñ€Ð°Ñ‚ÑŒ Ð² Ñ„ÑƒÑ‚Ð±Ð¾Ð»", sentence: "æ˜Žå¤©æˆ‘ä»¬ä¸€èµ·åŽ»è¸¢è¶³çƒå§ã€‚", chunks: ["æ˜Žå¤©", "æˆ‘ä»¬", "ä¸€èµ·åŽ»", "è¸¢è¶³çƒ", "å§"] },
            { id: 5, lesson: "L01", hanzi: "ä¸ºä»€ä¹ˆ", pinyin: "wÃ¨i shÃ©nme", en: "why", ru: "Ð¿Ð¾Ñ‡ÐµÐ¼Ñƒ", sentence: "ä½ ä¸ºä»€ä¹ˆä¸å¼€è½¦åŽ»å‘¢ï¼Ÿ", chunks: ["ä½ ", "ä¸ºä»€ä¹ˆ", "ä¸å¼€è½¦", "åŽ»å‘¢"] },
            { id: 6, lesson: "L01", hanzi: "æ–°", pinyin: "xÄ«n", en: "new", ru: "Ð½Ð¾Ð²Ñ‹Ð¹", sentence: "æˆ‘çš„ä¹¦æ˜¯ä¸€æœ¬æ–°ä¹¦ï¼Œä¸æ˜¯è¿™æœ¬ã€‚", chunks: ["æˆ‘çš„ä¹¦", "æ˜¯", "ä¸€æœ¬", "æ–°ä¹¦"] },
            { id: 7, lesson: "L01", hanzi: "çœ¼ç›", pinyin: "yÇŽnjÄ«ng", en: "eye", ru: "Ð³Ð»Ð°Ð·", sentence: "å®ƒçš„çœ¼ç›å¾ˆæ¼‚äº®ã€‚", chunks: ["å®ƒçš„", "çœ¼ç›", "å¾ˆ", "æ¼‚äº®"] },
            { id: 8, lesson: "L01", hanzi: "è¦", pinyin: "yÃ o", en: "to want to, will", ru: "Ñ…Ð¾Ñ‚ÐµÑ‚ÑŒ; ÑÐ¾Ð±Ð¸Ñ€Ð°Ñ‚ÑŒÑÑ", sentence: "æ˜Žå¤©æˆ‘è¦åŽ»ç«è½¦ç«™ä¹°ç¥¨ã€‚", chunks: ["æ˜Žå¤©", "æˆ‘è¦åŽ»", "ç«è½¦ç«™", "ä¹°ç¥¨"] },
            { id: 9, lesson: "L01", hanzi: "ä¹Ÿ", pinyin: "yÄ›", en: "also, too", ru: "Ñ‚Ð¾Ð¶Ðµ", sentence: "ä»Šå¤©çš„å¤©æ°”ä¸å†·ä¹Ÿä¸çƒ­ã€‚", chunks: ["ä»Šå¤©çš„", "å¤©æ°”", "ä¸å†·", "ä¹Ÿ", "ä¸çƒ­"] },
            { id: 10, lesson: "L01", hanzi: "ä¸€èµ·", pinyin: "yÃ¬qÇ", en: "together", ru: "Ð²Ð¼ÐµÑÑ‚Ðµ", sentence: "æ˜Žå¤©æ—©ä¸Šæˆ‘ä»¬ä¸€èµ·åŽ»è·‘æ­¥å§ã€‚", chunks: ["æ˜Žå¤©æ—©ä¸Š", "æˆ‘ä»¬", "ä¸€èµ·åŽ»", "è·‘æ­¥å§"] },
            { id: 11, lesson: "L01", hanzi: "è¿åŠ¨", pinyin: "yÃ¹ndÃ²ng", en: "sports, exercise", ru: "ÑÐ¿Ð¾Ñ€Ñ‚; Ð·Ð°Ð½Ð¸Ð¼Ð°Ñ‚ÑŒÑÑ ÑÐ¿Ð¾Ñ€Ñ‚Ð¾Ð¼", sentence: "ä»–æ¯å¤©éƒ½è¿åŠ¨ä¸€ä¸ªå°æ—¶ã€‚", chunks: ["ä»–", "æ¯å¤©éƒ½", "è¿åŠ¨", "ä¸€ä¸ªå°æ—¶"] },
            { id: 12, lesson: "L01", hanzi: "æœ€", pinyin: "zuÃ¬", en: "most", ru: "ÑÐ°Ð¼Ñ‹Ð¹", sentence: "ç§‹å¤©åŽ»åŒ—äº¬æ—…æ¸¸æœ€å¥½ã€‚", chunks: ["ç§‹å¤©", "åŽ»åŒ—äº¬", "æ—…æ¸¸", "æœ€å¥½"] },

            // L02
            { id: 13, lesson: "L02", hanzi: "å‡º", pinyin: "chÅ«", en: "to go out", ru: "Ð²Ñ‹Ñ…Ð¾Ð´Ð¸Ñ‚ÑŒ", sentence: "æˆ‘è¦å‡ºåŽ»è·‘æ­¥ã€‚", chunks: ["æˆ‘è¦", "å‡ºåŽ»", "è·‘æ­¥"] },
            { id: 14, lesson: "L02", hanzi: "é«˜", pinyin: "gÄo", en: "tall, high", ru: "Ð²Ñ‹ÑÐ¾ÐºÐ¸Ð¹", sentence: "ä»–ä¸ªå­å¾ˆé«˜ã€‚", chunks: ["ä»–", "ä¸ªå­", "å¾ˆé«˜"] },
            { id: 15, lesson: "L02", hanzi: "å¿™", pinyin: "mÃ¡ng", en: "busy", ru: "Ð·Ð°Ð½ÑÑ‚Ñ‹Ð¹", sentence: "ä½ æœ€è¿‘å¿™å—ï¼Ÿ", chunks: ["ä½ ", "æœ€è¿‘", "å¿™å—"] },
            { id: 16, lesson: "L02", hanzi: "æ¯", pinyin: "mÄ›i", en: "every", ru: "ÐºÐ°Ð¶Ð´Ñ‹Ð¹", sentence: "æˆ‘æ¯å¤©éƒ½å‡ºåŽ»è·‘æ­¥ã€‚", chunks: ["æˆ‘", "æ¯å¤©éƒ½", "å‡ºåŽ»", "è·‘æ­¥"] },
            { id: 17, lesson: "L02", hanzi: "è·‘æ­¥", pinyin: "pÇŽobÃ¹", en: "to run, to jog", ru: "Ð±ÐµÐ³Ð°Ñ‚ÑŒ", sentence: "è·‘æ­¥å¯¹èº«ä½“æœ‰å¥½å¤„ã€‚", chunks: ["è·‘æ­¥", "å¯¹èº«ä½“", "æœ‰", "å¥½å¤„"] },
            { id: 18, lesson: "L02", hanzi: "èµ·åºŠ", pinyin: "qÇchuÃ¡ng", en: "to get up", ru: "Ð²ÑÑ‚Ð°Ð²Ð°Ñ‚ÑŒ Ñ ÐºÑ€Ð¾Ð²Ð°Ñ‚Ð¸", sentence: "æˆ‘æ¯å¤©æ—©ä¸Šå…­ç‚¹èµ·åºŠã€‚", chunks: ["æˆ‘", "æ¯å¤©æ—©ä¸Š", "å…­ç‚¹", "èµ·åºŠ"] },
            { id: 19, lesson: "L02", hanzi: "èº«ä½“", pinyin: "shÄ“ntÇ", en: "body, health", ru: "Ñ‚ÐµÐ»Ð¾; Ð·Ð´Ð¾Ñ€Ð¾Ð²ÑŒÐµ", sentence: "ä½ æœ€è¿‘èº«ä½“æ€Žä¹ˆæ ·ï¼Ÿ", chunks: ["ä½ ", "æœ€è¿‘", "èº«ä½“", "æ€Žä¹ˆæ ·"] },
            { id: 20, lesson: "L02", hanzi: "ç”Ÿç—…", pinyin: "shÄ“ngbÃ¬ng", en: "to get sick", ru: "Ð·Ð°Ð±Ð¾Ð»ÐµÑ‚ÑŒ", sentence: "ä»–ä»Šå¤©ç”Ÿç—…äº†ï¼Œä¸èƒ½æ¥ä¸Šç­äº†ã€‚", chunks: ["ä»–", "ä»Šå¤©", "ç”Ÿç—…äº†", "ä¸èƒ½æ¥", "ä¸Šç­äº†"] },
            { id: 21, lesson: "L02", hanzi: "æ—¶é—´", pinyin: "shÃ­jiÄn", en: "time", ru: "Ð²Ñ€ÐµÐ¼Ñ", sentence: "æ˜ŸæœŸå…­ä½ æœ‰æ—¶é—´å—ï¼Ÿ", chunks: ["æ˜ŸæœŸå…­", "ä½ ", "æœ‰", "æ—¶é—´å—"] },
            { id: 22, lesson: "L02", hanzi: "ä¼‘æ¯", pinyin: "xiÅ«xÄ«", en: "to rest", ru: "Ð¾Ñ‚Ð´Ñ‹Ñ…Ð°Ñ‚ÑŒ", sentence: "å‘¨æœ«æˆ‘è¦åœ¨å®¶å¥½å¥½ä¼‘æ¯ã€‚", chunks: ["å‘¨æœ«", "æˆ‘è¦", "åœ¨å®¶", "å¥½å¥½", "ä¼‘æ¯"] },
            { id: 23, lesson: "L02", hanzi: "è¯", pinyin: "yÃ o", en: "medicine", ru: "Ð»ÐµÐºÐ°Ñ€ÑÑ‚Ð²Ð¾", sentence: "ç”Ÿç—…äº†è¦åƒè¯ã€‚", chunks: ["ç”Ÿç—…äº†", "è¦", "åƒè¯"] },
            { id: 24, lesson: "L02", hanzi: "æ—©ä¸Š", pinyin: "zÇŽoshang", en: "morning", ru: "ÑƒÑ‚Ñ€Ð¾", sentence: "ä½ æ—©ä¸Šå‡ ç‚¹åƒæ—©é¥­ï¼Ÿ", chunks: ["ä½ ", "æ—©ä¸Š", "å‡ ç‚¹", "åƒæ—©é¥­"] },
            { id: 25, lesson: "L02", hanzi: "çŸ¥é“", pinyin: "zhÄ«dÃ o", en: "to know", ru: "Ð·Ð½Ð°Ñ‚ÑŒ", sentence: "æˆ‘ä¸çŸ¥é“è¿™ä¸ªè¯æ˜¯ä»€ä¹ˆæ„æ€ã€‚", chunks: ["æˆ‘ä¸", "çŸ¥é“", "è¿™ä¸ªè¯", "æ˜¯", "ä»€ä¹ˆæ„æ€"] },

            // L03
            { id: 26, lesson: "L03", hanzi: "æŠ¥çº¸", pinyin: "bÃ ozhÇ", en: "newspaper", ru: "Ð³Ð°Ð·ÐµÑ‚Ð°", sentence: "çˆ¸çˆ¸åœ¨çœ‹æŠ¥çº¸ã€‚", chunks: ["çˆ¸çˆ¸", "åœ¨çœ‹", "æŠ¥çº¸"] },
            { id: 27, lesson: "L03", hanzi: "æˆ¿é—´", pinyin: "fÃ¡ngjiÄn", en: "room", ru: "ÐºÐ¾Ð¼Ð½Ð°Ñ‚Ð°", sentence: "ä½ ä½å‡ å·æˆ¿é—´ï¼Ÿ", chunks: ["ä½ ä½", "å‡ å·", "æˆ¿é—´"] },
            { id: 28, lesson: "L03", hanzi: "çº¢", pinyin: "hÃ³ng", en: "red", ru: "ÐºÑ€Ð°ÑÐ½Ñ‹Ð¹", sentence: "ä¸­å›½äººå–œæ¬¢çº¢è‰²ã€‚", chunks: ["ä¸­å›½äºº", "å–œæ¬¢", "çº¢è‰²"] },
            { id: 29, lesson: "L03", hanzi: "ç‰›å¥¶", pinyin: "niÃºnÇŽi", en: "milk", ru: "Ð¼Ð¾Ð»Ð¾ÐºÐ¾", sentence: "æˆ‘æ¯å¤©è¦å–ä¸€æ¯ç‰›å¥¶ã€‚", chunks: ["æˆ‘", "æ¯å¤©è¦", "å–", "ä¸€æ¯", "ç‰›å¥¶"] },
            { id: 30, lesson: "L03", hanzi: "æ—è¾¹", pinyin: "pÃ¡ngbiÄn", en: "beside", ru: "Ñ€ÑÐ´Ð¾Ð¼", sentence: "å…¬äº¤è½¦ç«™åœ¨å­¦æ ¡å¤§é—¨æ—è¾¹ã€‚", chunks: ["å…¬äº¤è½¦ç«™", "åœ¨", "å­¦æ ¡å¤§é—¨", "æ—è¾¹"] },
            { id: 31, lesson: "L03", hanzi: "åƒ", pinyin: "qiÄn", en: "thousand", ru: "Ñ‚Ñ‹ÑÑÑ‡Ð°", sentence: "è¿™åªæ‰‹è¡¨ä¸‰åƒå¤šå—é’±ã€‚", chunks: ["è¿™åªæ‰‹è¡¨", "ä¸‰åƒå¤š", "å—é’±"] },
            { id: 32, lesson: "L03", hanzi: "æ‰‹è¡¨", pinyin: "shÇ’ubiÇŽo", en: "watch", ru: "Ð½Ð°Ñ€ÑƒÑ‡Ð½Ñ‹Ðµ Ñ‡Ð°ÑÑ‹", sentence: "è¿™æ”¯æ‰‹è¡¨æ˜¯é€ä½ çš„ç”Ÿæ—¥ç¤¼ç‰©ã€‚", chunks: ["è¿™æ”¯æ‰‹è¡¨", "æ˜¯", "é€ä½ çš„", "ç”Ÿæ—¥ç¤¼ç‰©"] },
            { id: 33, lesson: "L03", hanzi: "é€", pinyin: "sÃ²ng", en: "to give (gift), to send", ru: "Ð´Ð°Ñ€Ð¸Ñ‚ÑŒ; Ð¿Ñ€Ð¾Ð²Ð¾Ð¶Ð°Ñ‚ÑŒ", sentence: "ä½ é€å¥¹ä»€ä¹ˆç¤¼ç‰©ï¼Ÿ", chunks: ["ä½ ", "é€å¥¹", "ä»€ä¹ˆ", "ç¤¼ç‰©"] },
            { id: 34, lesson: "L03", hanzi: "é¢œè‰²", pinyin: "yÃ¡nsÃ¨", en: "color", ru: "Ñ†Ð²ÐµÑ‚", sentence: "çº¢è‰²æ˜¯æˆ‘æœ€å–œæ¬¢çš„é¢œè‰²ã€‚", chunks: ["çº¢è‰²", "æ˜¯", "æˆ‘æœ€å–œæ¬¢çš„", "é¢œè‰²"] },
            { id: 35, lesson: "L03", hanzi: "ä¸€ä¸‹", pinyin: "yÃ­xiÃ ", en: "a little bit, once", ru: "Ð½ÐµÐ¼Ð½Ð¾Ð³Ð¾; Ñ€Ð°Ð·Ð¾Ðº", sentence: "æˆ‘ä»¬ä¼‘æ¯ä¸€ä¸‹å§ã€‚", chunks: ["æˆ‘ä»¬", "ä¼‘æ¯", "ä¸€ä¸‹", "å§"] },
            { id: 36, lesson: "L03", hanzi: "ä¸ˆå¤«", pinyin: "zhÃ ngfu", en: "husband", ru: "Ð¼ÑƒÐ¶", sentence: "é‚£ä¸ªäººæ˜¯å¥¹çš„ä¸ˆå¤«ã€‚", chunks: ["é‚£ä¸ªäºº", "æ˜¯", "å¥¹çš„", "ä¸ˆå¤«"] },
            { id: 37, lesson: "L03", hanzi: "çœŸ", pinyin: "zhÄ“n", en: "really", ru: "Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾", sentence: "ä½ çš„æ±‰è¯­è¯´å¾—çœŸå¥½ã€‚", chunks: ["ä½ çš„", "æ±‰è¯­", "è¯´å¾—", "çœŸå¥½"] },
            { id: 38, lesson: "L03", hanzi: "å·¦è¾¹", pinyin: "zuÇ’biÄn", en: "left side", ru: "ÑÐ»ÐµÐ²Ð°", sentence: "ä»–å·¦è¾¹é‚£ä¸ªäººä½ è®¤è¯†å—ï¼Ÿ", chunks: ["ä»–", "å·¦è¾¹", "é‚£ä¸ªäºº", "ä½ è®¤è¯†å—"] },

            // L04
            { id: 39, lesson: "L04", hanzi: "éžå¸¸", pinyin: "fÄ“ichÃ¡ng", en: "very, extremely", ru: "Ñ‡Ñ€ÐµÐ·Ð²Ñ‹Ñ‡Ð°Ð¹Ð½Ð¾", sentence: "ä»–éžå¸¸å–œæ¬¢ä¸­å›½ã€‚", chunks: ["ä»–", "éžå¸¸", "å–œæ¬¢", "ä¸­å›½"] },
            { id: 40, lesson: "L04", hanzi: "ç»™", pinyin: "gÄ›i", en: "to, for, to give", ru: "Ð´Ð°Ð²Ð°Ñ‚ÑŒ; Ð´Ð»Ñ", sentence: "è¿™æœ¬ä¹¦æ˜¯é€ç»™ä½ çš„ã€‚", chunks: ["è¿™æœ¬ä¹¦", "æ˜¯", "é€ç»™", "ä½ çš„"] },
            { id: 41, lesson: "L04", hanzi: "ä»‹ç»", pinyin: "jiÃ¨shÃ o", en: "to introduce", ru: "Ð¿Ñ€ÐµÐ´ÑÑ‚Ð°Ð²Ð»ÑÑ‚ÑŒ", sentence: "è¯·ä½ ä»‹ç»ä¸€ä¸‹è‡ªå·±ã€‚", chunks: ["è¯·ä½ ", "ä»‹ç»", "ä¸€ä¸‹", "è‡ªå·±"] },
            { id: 42, lesson: "L04", hanzi: "å¼€å§‹", pinyin: "kÄishÇ", en: "to start", ru: "Ð½Ð°Ñ‡Ð¸Ð½Ð°Ñ‚ÑŒ", sentence: "æˆ‘æ˜¯åŽ»å¹´å¼€å§‹å­¦æ±‰è¯­çš„ã€‚", chunks: ["æˆ‘æ˜¯", "åŽ»å¹´", "å¼€å§‹", "å­¦æ±‰è¯­çš„"] },
            { id: 43, lesson: "L04", hanzi: "å¿«ä¹", pinyin: "kuÃ i lÃ¨", en: "happy", ru: "ÑÑ‡Ð°ÑÑ‚Ð»Ð¸Ð²Ñ‹Ð¹", sentence: "ç”Ÿæ—¥å¿«ä¹ã€‚", chunks: ["ç”Ÿæ—¥", "å¿«ä¹"] },
            { id: 44, lesson: "L04", hanzi: "ä¸¤", pinyin: "liÇŽng", en: "two", ru: "Ð´Ð²Ð°", sentence: "æˆ‘å­¦äº†ä¸¤å¹´æ±‰è¯­ã€‚", chunks: ["æˆ‘", "å­¦äº†", "ä¸¤å¹´", "æ±‰è¯­"] },
            { id: 45, lesson: "L04", hanzi: "ç”Ÿæ—¥", pinyin: "shÄ“ngrÃ¬", en: "birthday", ru: "Ð´ÐµÐ½ÑŒ Ñ€Ð¾Ð¶Ð´ÐµÐ½Ð¸Ñ", sentence: "æ˜Žå¤©æ˜¯ä»–çš„ç”Ÿæ—¥ã€‚", chunks: ["æ˜Žå¤©", "æ˜¯", "ä»–çš„", "ç”Ÿæ—¥"] },
            { id: 46, lesson: "L04", hanzi: "æ™šä¸Š", pinyin: "wÇŽnshang", en: "evening", ru: "Ð²ÐµÑ‡ÐµÑ€", sentence: "ä½ æ™šä¸Šå’Œæˆ‘ä»¬ä¸€èµ·åŽ»åƒé¥­å—ï¼Ÿ", chunks: ["ä½ ", "æ™šä¸Š", "å’Œæˆ‘ä»¬", "ä¸€èµ·åŽ»", "åƒé¥­å—"] },
            { id: 47, lesson: "L04", hanzi: "é—®", pinyin: "wÃ¨n", en: "to ask", ru: "ÑÐ¿Ñ€Ð°ÑˆÐ¸Ð²Ð°Ñ‚ÑŒ", sentence: "æˆ‘æƒ³é—®ä½ ä¸€ä¸ªé—®é¢˜ã€‚", chunks: ["æˆ‘æƒ³", "é—®ä½ ", "ä¸€ä¸ª", "é—®é¢˜"] },
            { id: 48, lesson: "L04", hanzi: "å·²ç»", pinyin: "yÇjÄ«ng", en: "already", ru: "ÑƒÐ¶Ðµ", sentence: "æˆ‘å·²ç»å­¦äº†ä¸¤å¹´çš„æ±‰è¯­äº†ã€‚", chunks: ["æˆ‘", "å·²ç»", "å­¦äº†", "ä¸¤å¹´çš„", "æ±‰è¯­äº†"] },
            { id: 49, lesson: "L04", hanzi: "é•¿", pinyin: "chÃ¡ng", en: "long", ru: "Ð´Ð»Ð¸Ð½Ð½Ñ‹Ð¹", sentence: "ä½ æ¥ä¸­å›½å¤šé•¿æ—¶é—´äº†ï¼Ÿ", chunks: ["ä½ ", "æ¥ä¸­å›½", "å¤šé•¿", "æ—¶é—´äº†"] },
            { id: 50, lesson: "L04", hanzi: "å¸®åŠ©", pinyin: "bÄngzhÃ¹", en: "to help", ru: "Ð¿Ð¾Ð¼Ð¾Ð³Ð°Ñ‚ÑŒ", sentence: "çœ‹ç”µè§†å¯¹å­¦æ±‰è¯­æœ‰å¸®åŠ©ã€‚", chunks: ["çœ‹ç”µè§†", "å¯¹", "å­¦æ±‰è¯­", "æœ‰å¸®åŠ©"] },

            // L05
            { id: 51, lesson: "L05", hanzi: "å§", pinyin: "bÉ‘", en: "particle (suggestion)", ru: "Ñ‡Ð°ÑÑ‚Ð¸Ñ†Ð° ba", sentence: "æˆ‘ä»¬èµ°å§ã€‚", chunks: ["æˆ‘ä»¬", "èµ°", "å§"] },
            { id: 52, lesson: "L05", hanzi: "å¯¹", pinyin: "duÃ¬", en: "correct, to", ru: "Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹; Ðº", sentence: "è·‘æ­¥å¯¹èº«ä½“å¾ˆå¥½ã€‚", chunks: ["è·‘æ­¥", "å¯¹", "èº«ä½“", "å¾ˆå¥½"] },
            { id: 53, lesson: "L05", hanzi: "è¿˜", pinyin: "hÃ¡i", en: "still, also", ru: "ÐµÑ‰Ðµ; Ð²ÑÑ‘ Ð¶Ðµ", sentence: "ä»Šå¤©çš„å¤©æ°”è¿˜å¯ä»¥ã€‚", chunks: ["ä»Šå¤©çš„", "å¤©æ°”", "è¿˜", "å¯ä»¥"] },
            { id: 54, lesson: "L05", hanzi: "ä»¶", pinyin: "jiÃ n", en: "measure word (clothes)", ru: "ÑÑ‡. ÑÐ»Ð¾Ð²Ð¾ (Ð¾Ð´ÐµÐ¶Ð´Ð°)", sentence: "æˆ‘ä¹°äº†ä¸¤ä»¶è¡£æœã€‚", chunks: ["æˆ‘", "ä¹°äº†", "ä¸¤ä»¶", "è¡£æœ"] },
            { id: 55, lesson: "L05", hanzi: "å°±", pinyin: "jiÃ¹", en: "just, then", ru: "Ð¸Ð¼ÐµÐ½Ð½Ð¾; Ñ‚Ð¾Ð³Ð´Ð°", sentence: "ä½ ä¸æƒ³åŽ»å°±ä¸åŽ»å§ã€‚", chunks: ["ä½ ", "ä¸æƒ³åŽ»", "å°±", "ä¸åŽ»å§"] },
            { id: 56, lesson: "L05", hanzi: "å’–å•¡", pinyin: "kÄfÄ“i", en: "coffee", ru: "ÐºÐ¾Ñ„Ðµ", sentence: "æˆ‘æ¯å¤©è¦å–ä¸€æ¯å’–å•¡ã€‚", chunks: ["æˆ‘", "æ¯å¤©", "è¦å–", "ä¸€æ¯", "å’–å•¡"] },
            { id: 57, lesson: "L05", hanzi: "è€ƒè¯•", pinyin: "kÇŽoshÃ¬", en: "exam", ru: "ÑÐºÐ·Ð°Ð¼ÐµÐ½", sentence: "æ˜Žå¤©è¦è€ƒè¯•äº†ã€‚", chunks: ["æ˜Žå¤©", "è¦", "è€ƒè¯•äº†"] },
            { id: 58, lesson: "L05", hanzi: "å¯ä»¥", pinyin: "kÄ›yÇ", en: "can, okay", ru: "Ð¼Ð¾Ð¶Ð½Ð¾; Ð½ÐµÐ¿Ð»Ð¾Ñ…Ð¾", sentence: "ä»–çš„æ±‰è¯­è¯´å¾—è¿˜å¯ä»¥ã€‚", chunks: ["ä»–çš„", "æ±‰è¯­", "è¯´å¾—", "è¿˜å¯ä»¥"] },
            { id: 59, lesson: "L05", hanzi: "æ„æ€", pinyin: "yÃ¬si", en: "meaning", ru: "ÑÐ¼Ñ‹ÑÐ»; Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ", sentence: "è¿™ä¸ªè¯æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ", chunks: ["è¿™ä¸ªè¯", "æ˜¯", "ä»€ä¹ˆ", "æ„æ€"] },
            { id: 60, lesson: "L05", hanzi: "é±¼", pinyin: "yÃº", en: "fish", ru: "Ñ€Ñ‹Ð±Ð°", sentence: "æˆ‘éžå¸¸å–œæ¬¢åƒé±¼ã€‚", chunks: ["æˆ‘", "éžå¸¸", "å–œæ¬¢", "åƒé±¼"] },
            { id: 61, lesson: "L05", hanzi: "å‡†å¤‡", pinyin: "zhÇ”nbÃ¨i", en: "to prepare", ru: "Ð³Ð¾Ñ‚Ð¾Ð²Ð¸Ñ‚ÑŒÑÑ", sentence: "æˆ‘å‡†å¤‡å‡ºåŽ»åƒã€‚", chunks: ["æˆ‘", "å‡†å¤‡", "å‡ºåŽ»", "åƒ"] },

            // L06
            { id: 62, lesson: "L06", hanzi: "æ‰“ç¯®çƒ", pinyin: "dÇŽ lÃ¡nqiÃº", en: "play basketball", ru: "Ð¸Ð³Ñ€Ð°Ñ‚ÑŒ Ð² Ð±Ð°ÑÐºÐµÑ‚Ð±Ð¾Ð»", sentence: "æˆ‘ä»¬æ˜¨å¤©æ²¡åŽ»æ‰“ç¯®çƒã€‚", chunks: ["æˆ‘ä»¬", "æ˜¨å¤©", "æ²¡åŽ»", "æ‰“ç¯®çƒ"] },
            { id: 63, lesson: "L06", hanzi: "å¥½åƒ", pinyin: "hÇŽochÄ«", en: "delicious", ru: "Ð²ÐºÑƒÑÐ½Ñ‹Ð¹", sentence: "ä¸­å›½èœéžå¸¸å¥½åƒã€‚", chunks: ["ä¸­å›½èœ", "éžå¸¸", "å¥½åƒ"] },
            { id: 64, lesson: "L06", hanzi: "å§å§", pinyin: "jiÄ›jie", en: "older sister", ru: "ÑÑ‚Ð°Ñ€ÑˆÐ°Ñ ÑÐµÑÑ‚Ñ€Ð°", sentence: "ä»–æœ‰ä¸¤ä¸ªå§å§ã€‚", chunks: ["ä»–", "æœ‰", "ä¸¤ä¸ª", "å§å§"] },
            { id: 65, lesson: "L06", hanzi: "é—¨", pinyin: "mÃ©n", en: "door", ru: "Ð´Ð²ÐµÑ€ÑŒ", sentence: "é—¨å¼€ç€å‘¢ï¼Œè¯·è¿›æ¥å§ã€‚", chunks: ["é—¨", "å¼€ç€å‘¢", "è¯·", "è¿›æ¥å§"] },
            { id: 66, lesson: "L06", hanzi: "é¢æ¡", pinyin: "miÃ ntiÃ¡o", en: "noodles", ru: "Ð»Ð°Ð¿ÑˆÐ°", sentence: "ä»–éžå¸¸å–œæ¬¢åƒé¢æ¡ã€‚", chunks: ["ä»–", "éžå¸¸", "å–œæ¬¢", "åƒé¢æ¡"] },
            { id: 67, lesson: "L06", hanzi: "æ‰€ä»¥", pinyin: "suÇ’yÇ", en: "so", ru: "Ð¿Ð¾ÑÑ‚Ð¾Ð¼Ñƒ", sentence: "è¡£æœè´µï¼Œæ‰€ä»¥æˆ‘æ²¡ä¹°ã€‚", chunks: ["è¡£æœè´µ", "æ‰€ä»¥", "æˆ‘", "æ²¡ä¹°"] },
            { id: 68, lesson: "L06", hanzi: "å¤–", pinyin: "wÃ i", en: "outside", ru: "ÑÐ½Ð°Ñ€ÑƒÐ¶Ð¸", sentence: "ä»–åœ¨é—¨å¤–ç­‰ä½ å‘¢ã€‚", chunks: ["ä»–", "åœ¨", "é—¨å¤–", "ç­‰ä½ å‘¢"] },
            { id: 69, lesson: "L06", hanzi: "ç¾Šè‚‰", pinyin: "yÃ¡ngrÃ²u", en: "mutton", ru: "Ð±Ð°Ñ€Ð°Ð½Ð¸Ð½Ð°", sentence: "è¿™å®¶é¤åŽ…çš„ç¾Šè‚‰å¾ˆå¥½åƒã€‚", chunks: ["è¿™å®¶é¤åŽ…çš„", "ç¾Šè‚‰", "å¾ˆ", "å¥½åƒ"] },
            { id: 70, lesson: "L06", hanzi: "å› ä¸º", pinyin: "yÄ«nwÃ¨i", en: "because", ru: "Ð¿Ð¾Ñ‚Ð¾Ð¼Ñƒ Ñ‡Ñ‚Ð¾", sentence: "å› ä¸ºæˆ‘æ¯å¤©è¿åŠ¨ï¼Œæ‰€ä»¥èº«ä½“å¥½ã€‚", chunks: ["å› ä¸º", "æˆ‘æ¯å¤©", "è¿åŠ¨", "æ‰€ä»¥", "èº«ä½“å¥½"] },
            { id: 71, lesson: "L06", hanzi: "æ¸¸æ³³", pinyin: "yÃ³uyÇ’ng", en: "to swim", ru: "Ð¿Ð»Ð°Ð²Ð°Ñ‚ÑŒ", sentence: "ä½ å§å§ä¼šä¸ä¼šæ¸¸æ³³ï¼Ÿ", chunks: ["ä½ å§å§", "ä¼šä¸ä¼š", "æ¸¸æ³³"] },

            // L07
            { id: 72, lesson: "L07", hanzi: "åˆ°", pinyin: "dÃ o", en: "to arrive", ru: "Ð¿Ñ€Ð¸Ð±Ñ‹Ð²Ð°Ñ‚ÑŒ", sentence: "ä½ å‡ ç‚¹åˆ°å­¦æ ¡ï¼Ÿ", chunks: ["ä½ ", "å‡ ç‚¹", "åˆ°", "å­¦æ ¡"] },
            { id: 73, lesson: "L07", hanzi: "å…¬äº¤è½¦", pinyin: "gÅngjiÄochÄ“", en: "bus", ru: "Ð°Ð²Ñ‚Ð¾Ð±ÑƒÑ", sentence: "æˆ‘åå…¬äº¤è½¦åŽ»å­¦æ ¡ã€‚", chunks: ["æˆ‘", "å", "å…¬äº¤è½¦", "åŽ»å­¦æ ¡"] },
            { id: 74, lesson: "L07", hanzi: "å…¬å¸", pinyin: "gÅngsÄ«", en: "company", ru: "ÐºÐ¾Ð¼Ð¿Ð°Ð½Ð¸Ñ", sentence: "æˆ‘å®¶ç¦»å…¬å¸å¾ˆè¿œã€‚", chunks: ["æˆ‘å®¶", "ç¦»", "å…¬å¸", "å¾ˆè¿œ"] },
            { id: 75, lesson: "L07", hanzi: "æœºåœº", pinyin: "jÄ«chÇŽng", en: "airport", ru: "Ð°ÑÑ€Ð¾Ð¿Ð¾Ñ€Ñ‚", sentence: "æˆ‘çŽ°åœ¨å‡ºå‘åŽ»æœºåœºã€‚", chunks: ["æˆ‘çŽ°åœ¨", "å‡ºå‘", "åŽ»", "æœºåœº"] },
            { id: 76, lesson: "L07", hanzi: "æ•™å®¤", pinyin: "jiÄoshÃ¬", en: "classroom", ru: "ÐºÐ»Ð°ÑÑ (Ð¿Ð¾Ð¼ÐµÑ‰ÐµÐ½Ð¸Ðµ)", sentence: "æˆ‘ä»¬çš„æ•™å®¤åœ¨äºŒæ¥¼ã€‚", chunks: ["æˆ‘ä»¬çš„", "æ•™å®¤", "åœ¨", "äºŒæ¥¼"] },
            { id: 77, lesson: "L07", hanzi: "å¿«", pinyin: "kuÃ i", en: "fast", ru: "Ð±Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹", sentence: "å¼€è½¦æ¯”åè½¦å¿«ã€‚", chunks: ["å¼€è½¦", "æ¯”", "åè½¦", "å¿«"] },
            { id: 78, lesson: "L07", hanzi: "ç¦»", pinyin: "lÃ­", en: "from (distance)", ru: "Ð¾Ñ‚ (Ñ€Ð°ÑÑÑ‚Ð¾ÑÐ½Ð¸Ðµ)", sentence: "å­¦æ ¡ç¦»ä½ å®¶è¿œå—ï¼Ÿ", chunks: ["å­¦æ ¡", "ç¦»", "ä½ å®¶", "è¿œå—"] },
            { id: 79, lesson: "L07", hanzi: "æ…¢", pinyin: "mÃ n", en: "slow", ru: "Ð¼ÐµÐ´Ð»ÐµÐ½Ð½Ñ‹Ð¹", sentence: "åå…¬äº¤è½¦å¤ªæ…¢äº†ã€‚", chunks: ["å", "å…¬äº¤è½¦", "å¤ª", "æ…¢äº†"] },
            { id: 80, lesson: "L07", hanzi: "å°æ—¶", pinyin: "xiÇŽoshÃ­", en: "hour", ru: "Ñ‡Ð°Ñ", sentence: "å¼€è½¦è¦ä¸€ä¸ªå°æ—¶ã€‚", chunks: ["å¼€è½¦", "è¦", "ä¸€ä¸ª", "å°æ—¶"] },
            { id: 81, lesson: "L07", hanzi: "è¿œ", pinyin: "yuÇŽn", en: "far", ru: "Ð´Ð°Ð»ÐµÐºÐ¸Ð¹", sentence: "å…¬äº¤è½¦ç«™ç¦»è¿™å„¿æœ‰ç‚¹è¿œã€‚", chunks: ["å…¬äº¤è½¦ç«™", "ç¦»è¿™å„¿", "æœ‰ç‚¹", "è¿œ"] },
            { id: 82, lesson: "L07", hanzi: "èµ°", pinyin: "zÇ’u", en: "to walk", ru: "Ð¸Ð´Ñ‚Ð¸", sentence: "å¾€å‰èµ°å°±åˆ°å­¦æ ¡äº†ã€‚", chunks: ["å¾€å‰èµ°", "å°±", "åˆ°", "å­¦æ ¡äº†"] },
            { id: 83, lesson: "L07", hanzi: "è·¯", pinyin: "lÃ¹", en: "road", ru: "Ð´Ð¾Ñ€Ð¾Ð³Ð°", sentence: "ä»Šå¤©è·¯ä¸Šè½¦å¤ªå¤šäº†ã€‚", chunks: ["ä»Šå¤©", "è·¯ä¸Š", "è½¦", "å¤ªå¤šäº†"] },

            // L08
            { id: 84, lesson: "L08", hanzi: "ç™½", pinyin: "bÃ¡i", en: "white", ru: "Ð±ÐµÐ»Ñ‹Ð¹", sentence: "æˆ‘å–œæ¬¢ç™½è‰²çš„è¡£æœã€‚", chunks: ["æˆ‘", "å–œæ¬¢", "ç™½è‰²çš„", "è¡£æœ"] },
            { id: 85, lesson: "L08", hanzi: "ç­‰", pinyin: "dÄ›ng", en: "to wait", ru: "Ð¶Ð´Ð°Ñ‚ÑŒ", sentence: "è¯·ç­‰æˆ‘äº”åˆ†é’Ÿã€‚", chunks: ["è¯·", "ç­‰æˆ‘", "äº”åˆ†é’Ÿ"] },
            { id: 86, lesson: "L08", hanzi: "æœåŠ¡å‘˜", pinyin: "fÃºwÃ¹yuÃ¡n", en: "waiter", ru: "Ð¾Ñ„Ð¸Ñ†Ð¸Ð°Ð½Ñ‚", sentence: "æœåŠ¡å‘˜ï¼Œè¯·ç»™æˆ‘ä¸€æ¯æ°´ã€‚", chunks: ["æœåŠ¡å‘˜", "è¯·", "ç»™æˆ‘", "ä¸€æ¯æ°´"] },
            { id: 87, lesson: "L08", hanzi: "å‘Šè¯‰", pinyin: "gÃ osÃ¹", en: "to tell", ru: "ÑÐºÐ°Ð·Ð°Ñ‚ÑŒ; ÑÐ¾Ð¾Ð±Ñ‰Ð¸Ñ‚ÑŒ", sentence: "è®©æˆ‘æƒ³æƒ³å†å‘Šè¯‰ä½ ã€‚", chunks: ["è®©æˆ‘", "æƒ³æƒ³", "å†", "å‘Šè¯‰ä½ "] },
            { id: 88, lesson: "L08", hanzi: "è´µ", pinyin: "guÃ¬", en: "expensive", ru: "Ð´Ð¾Ñ€Ð¾Ð³Ð¾Ð¹", sentence: "è¿™ä»¶è¡£æœæœ‰ç‚¹å„¿è´µã€‚", chunks: ["è¿™ä»¶", "è¡£æœ", "æœ‰ç‚¹å„¿", "è´µ"] },
            { id: 89, lesson: "L08", hanzi: "é»‘", pinyin: "hÄ“i", en: "black", ru: "Ñ‡ÐµÑ€Ð½Ñ‹Ð¹", sentence: "æˆ‘ä¸å–œæ¬¢é»‘è‰²ã€‚", chunks: ["æˆ‘", "ä¸å–œæ¬¢", "é»‘è‰²"] },
            { id: 90, lesson: "L08", hanzi: "è®©", pinyin: "rÃ ng", en: "to let", ru: "Ð¿Ð¾Ð·Ð²Ð¾Ð»ÑÑ‚ÑŒ", sentence: "è®©æˆ‘æƒ³æƒ³ã€‚", chunks: ["è®©", "æˆ‘", "æƒ³æƒ³"] },
            { id: 91, lesson: "L08", hanzi: "äº‹æƒ…", pinyin: "shÃ¬qÃ­ng", en: "matter, thing", ru: "Ð´ÐµÐ»Ð¾", sentence: "æœ€è¿‘æˆ‘çš„äº‹æƒ…æœ‰ç‚¹å„¿å¤šã€‚", chunks: ["æœ€è¿‘", "æˆ‘çš„", "äº‹æƒ…", "æœ‰ç‚¹å„¿å¤š"] },
            { id: 92, lesson: "L08", hanzi: "å†", pinyin: "zÃ i", en: "again", ru: "ÑÐ½Ð¾Ð²Ð°", sentence: "è®©æˆ‘å†æƒ³ä¸€æƒ³ã€‚", chunks: ["è®©æˆ‘", "å†", "æƒ³ä¸€æƒ³"] },
            { id: 93, lesson: "L08", hanzi: "æ‰¾", pinyin: "zhÇŽo", en: "to find, look for", ru: "Ð¸ÑÐºÐ°Ñ‚ÑŒ", sentence: "æˆ‘æƒ³æ‰¾æ—¶é—´åŽ»çœ‹çœ‹ä»–ã€‚", chunks: ["æˆ‘æƒ³", "æ‰¾æ—¶é—´", "åŽ»", "çœ‹çœ‹ä»–"] },

            // L09
            { id: 94, lesson: "L09", hanzi: "ä»Ž", pinyin: "cÃ³ng", en: "from", ru: "Ð¾Ñ‚; Ð¸Ð·", sentence: "ä»Žä¸‹ä¸ªæ˜ŸæœŸä¸€å¼€å§‹ä¸Šç­ã€‚", chunks: ["ä»Ž", "ä¸‹ä¸ª", "æ˜ŸæœŸä¸€", "å¼€å§‹ä¸Šç­"] },
            { id: 95, lesson: "L09", hanzi: "é”™", pinyin: "cuÃ²", en: "wrong", ru: "Ð½ÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹", sentence: "ä½ æ‰“é”™ç”µè¯äº†ã€‚", chunks: ["ä½ ", "æ‰“é”™", "ç”µè¯", "äº†"] },
            { id: 96, lesson: "L09", hanzi: "ç¬¬ä¸€", pinyin: "dÃ¬ yÄ«", en: "first", ru: "Ð¿ÐµÑ€Ð²Ñ‹Ð¹", sentence: "è¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡æ¥ä¸­å›½ã€‚", chunks: ["è¿™æ˜¯", "æˆ‘", "ç¬¬ä¸€æ¬¡", "æ¥ä¸­å›½"] },
            { id: 97, lesson: "L09", hanzi: "æ‡‚", pinyin: "dÇ’ng", en: "to understand", ru: "Ð¿Ð¾Ð½Ð¸Ð¼Ð°Ñ‚ÑŒ", sentence: "ä½ å¬æ‡‚äº†å—ï¼Ÿ", chunks: ["ä½ ", "å¬æ‡‚", "äº†å—"] },
            { id: 98, lesson: "L09", hanzi: "ä¸Šç­", pinyin: "shÃ ngbÄn", en: "go to work", ru: "Ð¸Ð´Ñ‚Ð¸ Ð½Ð° Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ", sentence: "æˆ‘æ¯å¤©ä¸ƒç‚¹åŠåŽ»ä¸Šç­ã€‚", chunks: ["æˆ‘", "æ¯å¤©", "ä¸ƒç‚¹åŠ", "åŽ»ä¸Šç­"] },
            { id: 99, lesson: "L09", hanzi: "é¢˜", pinyin: "tÃ­", en: "question", ru: "Ð²Ð¾Ð¿Ñ€Ð¾Ñ (Ð² Ñ‚ÐµÑÑ‚Ðµ)", sentence: "è¿™é“é¢˜å¤ªéš¾äº†ã€‚", chunks: ["è¿™é“é¢˜", "å¤ª", "éš¾äº†"] },
            { id: 100, lesson: "L09", hanzi: "è·³èˆž", pinyin: "tiÃ owÇ”", en: "to dance", ru: "Ñ‚Ð°Ð½Ñ†ÐµÐ²Ð°Ñ‚ÑŒ", sentence: "æˆ‘å¦ˆå¦ˆéžå¸¸å–œæ¬¢è·³èˆžã€‚", chunks: ["æˆ‘å¦ˆå¦ˆ", "éžå¸¸", "å–œæ¬¢", "è·³èˆž"] },
            { id: 101, lesson: "L09", hanzi: "å®Œ", pinyin: "wÃ¡n", en: "to finish", ru: "Ð·Ð°ÐºÐ°Ð½Ñ‡Ð¸Ð²Ð°Ñ‚ÑŒ", sentence: "æˆ‘æ²¡æœ‰åšå®Œã€‚", chunks: ["æˆ‘", "æ²¡æœ‰", "åšå®Œ"] },
            { id: 102, lesson: "L09", hanzi: "é—®é¢˜", pinyin: "wÃ¨ntÃ­", en: "problem", ru: "Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ð°", sentence: "è¿™ä¸ªé—®é¢˜ä½ å¯ä»¥åŽ»é—®è€å¸ˆã€‚", chunks: ["è¿™ä¸ªé—®é¢˜", "ä½ å¯ä»¥", "åŽ»", "é—®è€å¸ˆ"] },
            { id: 103, lesson: "L09", hanzi: "å¸Œæœ›", pinyin: "xÄ«wÃ ng", en: "to hope", ru: "Ð½Ð°Ð´ÐµÑÑ‚ÑŒÑÑ", sentence: "æˆ‘å¸Œæœ›ä½ å¯ä»¥å¸®åŠ©æˆ‘ã€‚", chunks: ["æˆ‘", "å¸Œæœ›", "ä½ å¯ä»¥", "å¸®åŠ©æˆ‘"] },

            // L10
            { id: 104, lesson: "L10", hanzi: "åˆ«", pinyin: "biÃ©", en: "don't", ru: "Ð½Ðµ (Ð·Ð°Ð¿Ñ€ÐµÑ‚)", sentence: "åˆ«çœ‹ç”µè§†äº†ï¼Œåšä½œä¸šå§ã€‚", chunks: ["åˆ«", "çœ‹ç”µè§†äº†", "åš", "ä½œä¸šå§"] },
            { id: 105, lesson: "L10", hanzi: "å“¥å“¥", pinyin: "gÄ“ge", en: "older brother", ru: "ÑÑ‚Ð°Ñ€ÑˆÐ¸Ð¹ Ð±Ñ€Ð°Ñ‚", sentence: "è¿™æ˜¯æˆ‘å“¥å“¥ã€‚", chunks: ["è¿™æ˜¯", "æˆ‘", "å“¥å“¥"] },
            { id: 106, lesson: "L10", hanzi: "é¸¡è›‹", pinyin: "jÄ«dÃ n", en: "egg", ru: "ÑÐ¹Ñ†Ð¾", sentence: "ä»–ä¸å–œæ¬¢åƒé¸¡è›‹ã€‚", chunks: ["ä»–", "ä¸å–œæ¬¢", "åƒ", "é¸¡è›‹"] },
            { id: 107, lesson: "L10", hanzi: "è¯¾", pinyin: "kÃ¨", en: "class", ru: "ÑƒÑ€Ð¾Ðº", sentence: "ä»Šå¤©è¦ä¸Šæ±‰è¯­è¯¾ã€‚", chunks: ["ä»Šå¤©", "è¦ä¸Š", "æ±‰è¯­è¯¾"] },
            { id: 108, lesson: "L10", hanzi: "æ‰‹æœº", pinyin: "shÇ’ujÄ«", en: "mobile phone", ru: "Ð¼Ð¾Ð±Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½", sentence: "ä½ çš„æ‰‹æœºå·ç æ˜¯å¤šå°‘ï¼Ÿ", chunks: ["ä½ çš„", "æ‰‹æœºå·ç ", "æ˜¯", "å¤šå°‘"] },
            { id: 109, lesson: "L10", hanzi: "è¥¿ç“œ", pinyin: "xÄ«guÄ", en: "watermelon", ru: "Ð°Ñ€Ð±ÑƒÐ·", sentence: "æˆ‘ä¹°äº†ä¸€ä¸ªè¥¿ç“œã€‚", chunks: ["æˆ‘", "ä¹°äº†", "ä¸€ä¸ª", "è¥¿ç“œ"] },
            { id: 110, lesson: "L10", hanzi: "æ´—", pinyin: "xÇ", en: "to wash", ru: "Ð¼Ñ‹Ñ‚ÑŒ", sentence: "é‚£ä»¶è¡£æœæˆ‘æ´—äº†ã€‚", chunks: ["é‚£ä»¶", "è¡£æœ", "æˆ‘", "æ´—äº†"] },
            { id: 111, lesson: "L10", hanzi: "æ­£åœ¨", pinyin: "zhÃ¨ngzÃ i", en: "in process of", ru: "Ð² Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐµ (ÑÐµÐ¹Ñ‡Ð°Ñ)", sentence: "å¦ˆå¦ˆæ­£åœ¨åšé¥­å‘¢ã€‚", chunks: ["å¦ˆå¦ˆ", "æ­£åœ¨", "åšé¥­", "å‘¢"] },

            // L11
            { id: 112, lesson: "L11", hanzi: "æ¯”", pinyin: "bÇ", en: "than (comparison)", ru: "Ñ‡ÐµÐ¼ (ÑÑ€Ð°Ð²Ð½ÐµÐ½Ð¸Ðµ)", sentence: "æˆ‘å“¥å“¥æ¯”æˆ‘é«˜ã€‚", chunks: ["æˆ‘å“¥å“¥", "æ¯”", "æˆ‘", "é«˜"] },
            { id: 113, lesson: "L11", hanzi: "ä¾¿å®œ", pinyin: "piÃ¡nyi", en: "cheap", ru: "Ð´ÐµÑˆÐµÐ²Ñ‹Ð¹", sentence: "è¿™å®¶é¤åŽ…æ¯”é‚£å®¶ä¾¿å®œã€‚", chunks: ["è¿™å®¶", "é¤åŽ…", "æ¯”é‚£å®¶", "ä¾¿å®œ"] },
            { id: 114, lesson: "L11", hanzi: "å”±æ­Œ", pinyin: "chÃ nggÄ“", en: "to sing", ru: "Ð¿ÐµÑ‚ÑŒ", sentence: "å¥¹å¾ˆå–œæ¬¢å”±æ­Œã€‚", chunks: ["å¥¹", "å¾ˆ", "å–œæ¬¢", "å”±æ­Œ"] },
            { id: 115, lesson: "L11", hanzi: "å­©å­", pinyin: "hÃ¡izi", en: "child", ru: "Ñ€ÐµÐ±ÐµÐ½Ð¾Ðº", sentence: "ä»–ä»¬æœ‰ä¸¤ä¸ªå­©å­ã€‚", chunks: ["ä»–ä»¬", "æœ‰", "ä¸¤ä¸ª", "å­©å­"] },
            { id: 116, lesson: "L11", hanzi: "å¯èƒ½", pinyin: "kÄ›nÃ©ng", en: "maybe", ru: "Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾", sentence: "æ˜Žå¤©å¯èƒ½ä¼šä¸‹é›¨ã€‚", chunks: ["æ˜Žå¤©", "å¯èƒ½ä¼š", "ä¸‹é›¨"] },
            { id: 117, lesson: "L11", hanzi: "ç”·", pinyin: "nÃ¡n", en: "male", ru: "Ð¼ÑƒÐ¶ÑÐºÐ¾Ð¹", sentence: "å¥¹æœ‰ç”·æœ‹å‹å—ï¼Ÿ", chunks: ["å¥¹", "æœ‰", "ç”·æœ‹å‹", "å—"] },
            { id: 118, lesson: "L11", hanzi: "å¥³", pinyin: "nÇš", en: "female", ru: "Ð¶ÐµÐ½ÑÐºÐ¸Ð¹", sentence: "å¥¹æ˜¯æˆ‘æœ‹å‹ï¼Œä¸æ˜¯å¥³æœ‹å‹ã€‚", chunks: ["å¥¹", "æ˜¯", "æˆ‘æœ‹å‹", "ä¸æ˜¯", "å¥³æœ‹å‹"] },
            { id: 119, lesson: "L11", hanzi: "åŽ»å¹´", pinyin: "qÃ¹niÃ¡n", en: "last year", ru: "Ð¿Ñ€Ð¾ÑˆÐ»Ñ‹Ð¹ Ð³Ð¾Ð´", sentence: "æˆ‘æ˜¯åŽ»å¹´æ¥ä¸­å›½çš„ã€‚", chunks: ["æˆ‘", "æ˜¯", "åŽ»å¹´", "æ¥", "ä¸­å›½çš„"] },
            { id: 120, lesson: "L11", hanzi: "è¯´è¯", pinyin: "shuÅhuÃ ", en: "to speak", ru: "Ñ€Ð°Ð·Ð³Ð¾Ð²Ð°Ñ€Ð¸Ð²Ð°Ñ‚ÑŒ", sentence: "ä»–ä»¬ä¿©ä¸€ç›´åœ¨è¯´è¯ã€‚", chunks: ["ä»–ä»¬ä¿©", "ä¸€ç›´", "åœ¨", "è¯´è¯"] },
            { id: 121, lesson: "L11", hanzi: "å§“", pinyin: "xÃ¬ng", en: "surname", ru: "Ñ„Ð°Ð¼Ð¸Ð»Ð¸Ñ", sentence: "æ‚¨å§“ä»€ä¹ˆï¼Ÿ", chunks: ["æ‚¨", "å§“", "ä»€ä¹ˆ"] },
            { id: 122, lesson: "L11", hanzi: "å³è¾¹", pinyin: "yÃ²ubiÄn", en: "right side", ru: "ÑÐ¿Ñ€Ð°Ð²Ð°", sentence: "å³è¾¹é‚£ä¸ªäººæ˜¯æˆ‘çš„å¦ˆå¦ˆã€‚", chunks: ["å³è¾¹", "é‚£ä¸ª", "äºº", "æ˜¯", "æˆ‘çš„å¦ˆå¦ˆ"] },

            // L12
            { id: 123, lesson: "L12", hanzi: "ç©¿", pinyin: "chuÄn", en: "to wear", ru: "Ð½Ð¾ÑÐ¸Ñ‚ÑŒ", sentence: "ä»Šå¤©å†·ï¼Œä½ å¤šç©¿ä¸€ç‚¹å„¿ã€‚", chunks: ["ä»Šå¤©å†·", "ä½ ", "å¤šç©¿", "ä¸€ç‚¹å„¿"] },
            { id: 124, lesson: "L12", hanzi: "å¾—", pinyin: "de", en: "particle (complement)", ru: "Ñ‡Ð°ÑÑ‚Ð¸Ñ†Ð° (de)", sentence: "ä½ ç©¿å¾—å¤ªå°‘äº†ã€‚", chunks: ["ä½ ", "ç©¿å¾—", "å¤ªå°‘äº†"] },
            { id: 125, lesson: "L12", hanzi: "å¼Ÿå¼Ÿ", pinyin: "dÃ¬di", en: "younger brother", ru: "Ð¼Ð»Ð°Ð´ÑˆÐ¸Ð¹ Ð±Ñ€Ð°Ñ‚", sentence: "æˆ‘æœ‰ä¸€ä¸ªå¼Ÿå¼Ÿã€‚", chunks: ["æˆ‘", "æœ‰", "ä¸€ä¸ª", "å¼Ÿå¼Ÿ"] },
            { id: 126, lesson: "L12", hanzi: "è¿‘", pinyin: "jÃ¬n", en: "near", ru: "Ð±Ð»Ð¸Ð·ÐºÐ¾", sentence: "å®¾é¦†ç¦»è¿™å„¿å¾ˆè¿‘ã€‚", chunks: ["å®¾é¦†", "ç¦»è¿™å„¿", "å¾ˆè¿‘"] },
            { id: 127, lesson: "L12", hanzi: "è¿›", pinyin: "jÃ¬n", en: "to enter", ru: "Ð²Ñ…Ð¾Ð´Ð¸Ñ‚ÑŒ", sentence: "ä½ å¥½ï¼Œè¯·è¿›ï¼Œè¯·åã€‚", chunks: ["ä½ å¥½", "è¯·è¿›", "è¯·å"] },
            { id: 128, lesson: "L12", hanzi: "é›¶", pinyin: "lÃ­ng", en: "zero", ru: "Ð½Ð¾Ð»ÑŒ", sentence: "ä»Šå¤©é›¶ä¸‹10åº¦ã€‚", chunks: ["ä»Šå¤©", "é›¶ä¸‹", "10åº¦"] },
            { id: 129, lesson: "L12", hanzi: "å¦»å­", pinyin: "qÄ«zi", en: "wife", ru: "Ð¶ÐµÐ½Ð°", sentence: "ä»–çš„å¦»å­æ¯”ä»–å°ä¸¤å²ã€‚", chunks: ["ä»–çš„", "å¦»å­", "æ¯”ä»–", "å°ä¸¤å²"] },
            { id: 130, lesson: "L12", hanzi: "é›ª", pinyin: "xuÄ›", en: "snow", ru: "ÑÐ½ÐµÐ³", sentence: "ä»Šå¤©ä¸‹é›ªäº†ã€‚", chunks: ["ä»Šå¤©", "ä¸‹é›ª", "äº†"] },

            // L13
            { id: 131, lesson: "L13", hanzi: "å®¾é¦†", pinyin: "bÄ«nguÇŽn", en: "hotel", ru: "Ð³Ð¾ÑÑ‚Ð¸Ð½Ð¸Ñ†Ð°", sentence: "æœ€è¿‘çš„å®¾é¦†åœ¨å“ªå„¿ï¼Ÿ", chunks: ["æœ€è¿‘çš„", "å®¾é¦†", "åœ¨", "å“ªå„¿"] },
            { id: 132, lesson: "L13", hanzi: "é“…ç¬”", pinyin: "qiÄnbÇ", en: "pencil", ru: "ÐºÐ°Ñ€Ð°Ð½Ð´Ð°Ñˆ", sentence: "é‚£å„¿æœ‰ä¸€æ”¯é“…ç¬”ã€‚", chunks: ["é‚£å„¿", "æœ‰", "ä¸€æ”¯", "é“…ç¬”"] },
            { id: 133, lesson: "L13", hanzi: "å¾€", pinyin: "wÇŽng", en: "towards", ru: "Ð² Ð½Ð°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ð¸", sentence: "å¾€å‰èµ°å°±åˆ°äº†ã€‚", chunks: ["å¾€", "å‰", "èµ°", "å°±åˆ°äº†"] },
            { id: 134, lesson: "L13", hanzi: "ç¬‘", pinyin: "xiÃ o", en: "to laugh", ru: "ÑÐ¼ÐµÑÑ‚ÑŒÑÑ", sentence: "å¥¹æ˜¯ä¸€ä¸ªå¾ˆçˆ±ç¬‘çš„å¥³å­©å„¿ã€‚", chunks: ["å¥¹æ˜¯", "ä¸€ä¸ª", "å¾ˆ", "çˆ±ç¬‘", "çš„", "å¥³å­©å„¿"] },
            { id: 135, lesson: "L13", hanzi: "ç€", pinyin: "zhe", en: "particle (aspect)", ru: "Ñ‡Ð°ÑÑ‚Ð¸Ñ†Ð° (Ð¿Ñ€Ð¾Ð´Ð¾Ð»Ð¶.)", sentence: "å¥¹æ‹¿ç€ä¸€æœ¬ä¹¦ã€‚", chunks: ["å¥¹", "æ‹¿ç€", "ä¸€æœ¬", "ä¹¦"] },

            // L14
            { id: 136, lesson: "L14", hanzi: "ç™¾", pinyin: "bÇŽi", en: "hundred", ru: "ÑÑ‚Ð¾", sentence: "ç»™ä½ ä¸€ç™¾å—é’±ã€‚", chunks: ["ç»™", "ä½ ", "ä¸€ç™¾", "å—é’±"] },
            { id: 137, lesson: "L14", hanzi: "æ¬¡", pinyin: "cÃ¬", en: "time (frequency)", ru: "Ñ€Ð°Ð·", sentence: "ä»–åŽ»è¿‡å¥½å‡ æ¬¡ä¸­å›½ã€‚", chunks: ["ä»–", "åŽ»", "è¿‡", "å¥½å‡ æ¬¡", "ä¸­å›½"] },
            { id: 138, lesson: "L14", hanzi: "ä½†æ˜¯", pinyin: "dÃ nshÃ¬", en: "but", ru: "Ð½Ð¾", sentence: "æ±‰å­—éš¾ï¼Œä½†æ˜¯æˆ‘å–œæ¬¢ã€‚", chunks: ["æ±‰å­—", "éš¾", "ä½†æ˜¯", "æˆ‘", "å–œæ¬¢"] },
            { id: 139, lesson: "L14", hanzi: "æ™´", pinyin: "qÃ­ng", en: "sunny", ru: "ÑÑÐ½Ñ‹Ð¹", sentence: "ä»Šå¤©æ˜¯ä¸ªå¤§æ™´å¤©ã€‚", chunks: ["ä»Šå¤©", "æ˜¯", "ä¸ª", "å¤§æ™´å¤©"] },
            { id: 140, lesson: "L14", hanzi: "è™½ç„¶", pinyin: "suÄ«rÃ¡n", en: "although", ru: "Ñ…Ð¾Ñ‚Ñ", sentence: "è™½ç„¶æ˜¯æ™´å¤©ï¼Œä½†æ˜¯æœ‰ç‚¹å†·ã€‚", chunks: ["è™½ç„¶", "æ˜¯", "æ™´å¤©", "ä½†æ˜¯", "æœ‰ç‚¹å†·"] },
            { id: 141, lesson: "L14", hanzi: "çŽ©å„¿", pinyin: "wÃ¡nr", en: "to play", ru: "Ð¸Ð³Ñ€Ð°Ñ‚ÑŒ", sentence: "æ˜Žå¤©æƒ³åŽ»å“ªå„¿çŽ©å„¿ï¼Ÿ", chunks: ["æ˜Žå¤©", "æƒ³åŽ»", "å“ªå„¿", "çŽ©å„¿"] },

            // L15
            { id: 142, lesson: "L15", hanzi: "å¤§å®¶", pinyin: "dÃ jiÄ", en: "everyone", ru: "Ð²ÑÐµ", sentence: "è°¢è°¢å¤§å®¶å¯¹æˆ‘çš„å¸®åŠ©ã€‚", chunks: ["è°¢è°¢", "å¤§å®¶", "å¯¹æˆ‘", "çš„", "å¸®åŠ©"] },
            { id: 143, lesson: "L15", hanzi: "ç«è½¦ç«™", pinyin: "huÇ’chÄ“zhÃ n", en: "train station", ru: "Ð²Ð¾ÐºÐ·Ð°Ð»", sentence: "æˆ‘æ˜Žå¤©åŽ»ç«è½¦ç«™ä¹°ç¥¨ã€‚", chunks: ["æˆ‘", "æ˜Žå¤©", "åŽ»", "ç«è½¦ç«™", "ä¹°ç¥¨"] },
            { id: 144, lesson: "L15", hanzi: "å¦¹å¦¹", pinyin: "mÃ¨imei", en: "younger sister", ru: "Ð¼Ð»Ð°Ð´ÑˆÐ°Ñ ÑÐµÑÑ‚Ñ€Ð°", sentence: "ä»–å¦¹å¦¹æ¯”ä»–å°ä¸‰å²ã€‚", chunks: ["ä»–å¦¹å¦¹", "æ¯”ä»–", "å°", "ä¸‰å²"] },
            { id: 145, lesson: "L15", hanzi: "ç¥¨", pinyin: "piÃ o", en: "ticket", ru: "Ð±Ð¸Ð»ÐµÑ‚", sentence: "æˆ‘æ˜Žå¤©åŽ»ç«è½¦ç«™ä¹°ç¥¨ã€‚", chunks: ["æˆ‘", "æ˜Žå¤©", "åŽ»", "ç«è½¦ç«™", "ä¹°ç¥¨"] },
            { id: 146, lesson: "L15", hanzi: "æ—¥", pinyin: "rÃ¬", en: "day", ru: "Ð´ÐµÐ½ÑŒ", sentence: "ä½ çš„ç”Ÿæ—¥æ˜¯å‡ æœˆå‡ æ—¥ï¼Ÿ", chunks: ["ä½ çš„", "ç”Ÿæ—¥", "æ˜¯", "å‡ æœˆå‡ æ—¥"] },
            { id: 147, lesson: "L15", hanzi: "é˜´", pinyin: "yÄ«n", en: "cloudy", ru: "Ð¿Ð°ÑÐ¼ÑƒÑ€Ð½Ñ‹Ð¹", sentence: "ä»Šå¤©çš„å¤©æ°”æœ‰ç‚¹é˜´ã€‚", chunks: ["ä»Šå¤©çš„", "å¤©æ°”", "æœ‰ç‚¹", "é˜´"] }
        ];

        // --- DECK CONFIGURATION ---
        const DECKS = [
            { id: 'L01-L03', label: 'Lessons 1-3', range: ['L01', 'L02', 'L03'] },
            { id: 'L04-L06', label: 'Lessons 4-6', range: ['L04', 'L05', 'L06'] },
            { id: 'L07-L09', label: 'Lessons 7-9', range: ['L07', 'L08', 'L09'] },
            { id: 'L10-L12', label: 'Lessons 10-12', range: ['L10', 'L11', 'L12'] },
            { id: 'L13-L15', label: 'Lessons 13-15', range: ['L13', 'L14', 'L15'] },
            { id: 'ALL', label: 'All Lessons (1-15)', range: 'ALL' }
        ];

        // --- UTILS ---
        const speak = (text, lang = 'zh-CN') => {
            if (!window.speechSynthesis) return;
            window.speechSynthesis.cancel();
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = lang;
            utterance.rate = 0.8;
            window.speechSynthesis.speak(utterance);
        };

        const shuffleArray = (array) => {
            const newArr = [...array];
            for (let i = newArr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArr[i], newArr[j]] = [newArr[j], newArr[i]];
            }
            return newArr;
        };

        // --- COMPONENTS ---

        const ProgressBar = ({ current, total, label }) => (
            <div className="w-full bg-amber-200 rounded-full h-3 mb-4 relative overflow-hidden">
                <div 
                    className="bg-amber-500 h-3 rounded-full transition-all duration-500" 
                    style={{ width: `${(current / total) * 100}%` }}
                ></div>
                <span className="absolute top-0 right-1 text-[8px] text-amber-900 font-bold leading-3">
                    {current}/{total}
                </span>
            </div>
        );

        // 1. FLASHCARD MODE
        const FlashcardMode = ({ words, onUpdateMastery }) => {
            const [index, setIndex] = useState(0);
            const [flipped, setFlipped] = useState(false);
            
            // Reset index if deck changes
            useEffect(() => { setIndex(0); setFlipped(false); }, [words]);
            
            if (words.length === 0) return <div className="text-center p-10 text-amber-500">Deck Empty</div>;
            
            const currentWord = words[index];

            const handleNext = (score) => {
                onUpdateMastery(currentWord.id, score);
                setFlipped(false);
                setTimeout(() => setIndex((prev) => (prev + 1) % words.length), 200);
            };

            useEffect(() => {
                const handleKey = (e) => {
                    if (e.code === 'Space') { e.preventDefault(); setFlipped(p => !p); }
                    if (e.key.toLowerCase() === 'k' && flipped) handleNext(1);
                    if (e.key.toLowerCase() === 'a' && flipped) handleNext(0);
                    if (e.key.toLowerCase() === 'v') speak(currentWord.hanzi);
                };
                window.addEventListener('keydown', handleKey);
                return () => window.removeEventListener('keydown', handleKey);
            }, [flipped, index, currentWord]);

            return (
                <div className="flex flex-col items-center w-full max-w-sm mx-auto mt-4">
                    <ProgressBar current={index + 1} total={words.length} label="Card" />
                    
                    <div className="card-perspective w-full h-80 cursor-pointer group" onClick={() => setFlipped(!flipped)}>
                        <div className={`card-inner w-full h-full relative rounded-2xl shadow-xl duration-500 ${flipped ? 'card-flipped' : ''}`}>
                            <div className="card-front absolute w-full h-full bg-white rounded-2xl flex flex-col items-center justify-center p-6 border-2 border-amber-100">
                                <span className="text-xs text-amber-400 font-bold mb-2 uppercase tracking-widest">{currentWord.lesson}</span>
                                <h1 className="zh-text text-6xl text-gray-800 font-bold mb-4">{currentWord.hanzi}</h1>
                                <div className="mt-8 text-gray-400 text-xs italic">(Space to Flip)</div>
                            </div>

                            <div className="card-back absolute w-full h-full bg-amber-50 rounded-2xl flex flex-col items-center justify-center p-6 border-2 border-amber-200">
                                <h2 className="text-3xl text-amber-600 font-bold mb-2">{currentWord.pinyin}</h2>
                                <button 
                                    onClick={(e) => { e.stopPropagation(); speak(currentWord.hanzi); }}
                                    className="mb-6 w-10 h-10 bg-white rounded-full flex items-center justify-center text-amber-500 shadow-sm hover:scale-110 transition"
                                >
                                    <i className="ph-fill ph-speaker-high text-xl"></i>
                                </button>
                                <div className="bg-white p-3 rounded-lg shadow-sm w-full mb-2 text-center">
                                    <span className="text-[10px] text-gray-400 font-bold uppercase block mb-1">English</span>
                                    <p className="text-gray-800 font-bold leading-tight">{currentWord.en}</p>
                                </div>
                                <div className="bg-white p-3 rounded-lg shadow-sm w-full text-center">
                                    <span className="text-[10px] text-gray-400 font-bold uppercase block mb-1">Russian</span>
                                    <p className="text-gray-800 font-bold leading-tight">{currentWord.ru}</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div className="flex gap-3 mt-6 w-full">
                        <button onClick={() => handleNext(0)} className="flex-1 py-3 bg-rose-100 text-rose-600 font-bold rounded-xl hover:bg-rose-200 transition border border-rose-200 shadow-sm">(A)gain</button>
                        <button onClick={() => handleNext(1)} className="flex-1 py-3 bg-emerald-100 text-emerald-600 font-bold rounded-xl hover:bg-emerald-200 transition border border-emerald-200 shadow-sm">(K)new</button>
                    </div>
                </div>
            );
        };

        // 2. QUIZ MODE
        const QuizMode = ({ words }) => {
            const [current, setCurrent] = useState(null);
            const [options, setOptions] = useState([]);
            const [status, setStatus] = useState('guessing');
            const [stats, setStats] = useState({ correct: 0, total: 0 });

            const generateQuestion = () => {
                if(words.length < 4) return;
                const target = words[Math.floor(Math.random() * words.length)];
                const distractors = shuffleArray(words.filter(w => w.id !== target.id)).slice(0, 3);
                const allOptions = shuffleArray([target, ...distractors]);
                setCurrent(target);
                setOptions(allOptions);
                setStatus('guessing');
            };

            useEffect(() => { generateQuestion(); }, [words]);

            const handleGuess = (wordId) => {
                if (status !== 'guessing') return;
                const isCorrect = wordId === current.id;
                setStats(s => ({ correct: s.correct + (isCorrect ? 1 : 0), total: s.total + 1 }));
                setStatus(isCorrect ? 'correct' : 'wrong');
                if (isCorrect) speak(current.hanzi);
            };

            if (!current) return <div className="text-center p-10">Not enough words for quiz</div>;

            return (
                <div className="w-full max-w-sm mx-auto mt-6">
                    <div className="flex justify-between text-amber-800 font-bold mb-4 text-sm bg-amber-100 px-3 py-1 rounded-lg">
                        <span>Score: {stats.correct}</span>
                        <span>Total: {stats.total}</span>
                    </div>

                    <div className="bg-white p-10 rounded-2xl shadow-sm border-b-4 border-amber-200 text-center mb-6">
                        <h2 className="zh-text text-6xl font-bold text-gray-800 mb-2">{current.hanzi}</h2>
                        <p className="text-gray-400 font-mono text-lg">{status !== 'guessing' ? current.pinyin : '???'}</p>
                    </div>

                    <div className="grid grid-cols-1 gap-3">
                        {options.map(opt => (
                            <button
                                key={opt.id}
                                onClick={() => handleGuess(opt.id)}
                                disabled={status !== 'guessing'}
                                className={`p-4 rounded-xl text-left transition font-medium border-2 relative
                                    ${status === 'guessing' ? 'bg-white border-gray-100 hover:bg-amber-50 hover:border-amber-200' : ''}
                                    ${status !== 'guessing' && opt.id === current.id ? 'bg-green-50 border-green-400 text-green-800' : ''}
                                    ${status === 'wrong' && opt.id !== current.id ? 'opacity-50 border-transparent' : ''}
                                    ${status === 'wrong' && opt.id === current.id ? 'bg-green-50 border-green-400 text-green-800' : ''} 
                                `}
                            >
                                <div className="text-gray-800">{opt.en}</div>
                                <div className="text-gray-400 text-xs">{opt.ru}</div>
                            </button>
                        ))}
                    </div>

                    {status !== 'guessing' && (
                        <button onClick={generateQuestion} className="w-full mt-6 py-3 bg-amber-500 text-white font-bold rounded-xl shadow-lg hover:bg-amber-600 transition">
                            Next Word <i className="ph-bold ph-arrow-right ml-1"></i>
                        </button>
                    )}
                </div>
            );
        };

        // 3. SENTENCE BUILDER
        const SentenceBuilder = ({ words }) => {
            const [currentQ, setCurrentQ] = useState(0);
            const [userOrder, setUserOrder] = useState([]);
            const [bank, setBank] = useState([]);
            const [isCorrect, setIsCorrect] = useState(false);

            // Filter out words that don't have sentence chunks properly defined
            const validWords = useMemo(() => words.filter(w => w.chunks && w.chunks.length > 0), [words]);
            const currentWord = validWords[currentQ];

            useEffect(() => {
                if (currentWord) resetLevel();
            }, [currentQ, validWords]);

            const resetLevel = () => {
                const chunks = currentWord.chunks;
                setBank(shuffleArray(chunks.map((c, i) => ({ id: i, text: c }))));
                setUserOrder([]);
                setIsCorrect(false);
            };

            const handleBankClick = (item) => {
                const newBank = bank.filter(i => i.id !== item.id);
                const newOrder = [...userOrder, item];
                setBank(newBank);
                setUserOrder(newOrder);
                
                const currentStr = newOrder.map(o => o.text).join('');
                const targetStr = currentWord.chunks.join('');
                
                if (currentStr === targetStr) {
                    setIsCorrect(true);
                    speak(currentWord.sentence);
                }
            };

            const handleSlotClick = (item) => {
                if(isCorrect) return;
                setUserOrder(userOrder.filter(i => i.id !== item.id));
                setBank([...bank, item]);
            };

            const nextLevel = () => setCurrentQ((prev) => (prev + 1) % validWords.length);

            if (!currentWord) return <div>Loading...</div>;

            return (
                <div className="w-full max-w-md mx-auto mt-4 flex flex-col h-[calc(100vh-180px)]">
                    <ProgressBar current={currentQ + 1} total={validWords.length} label="Sentence" />
                    
                    <div className="bg-white p-5 rounded-2xl shadow-sm border-l-4 border-amber-400 mb-4">
                        <div className="text-lg font-bold text-gray-800 mb-1">{currentWord.en}</div>
                         <div className="text-sm text-gray-500">{currentWord.ru}</div>
                        <div className="text-xs text-amber-500 mt-2 font-bold uppercase">Build the sentence</div>
                    </div>

                    <div className={`flex-grow bg-amber-50 rounded-2xl p-4 border-2 border-dashed transition-colors flex content-start flex-wrap gap-2
                        ${isCorrect ? 'border-green-400 bg-green-50' : 'border-amber-300'}`}>
                        
                        {userOrder.length === 0 && !isCorrect && (
                            <div className="w-full text-center text-amber-300 mt-10 font-bold text-sm">Tap words below</div>
                        )}

                        {userOrder.map((item) => (
                            <button key={item.id} onClick={() => handleSlotClick(item)} className="zh-text bg-white px-3 py-2 rounded-lg shadow-sm text-lg border-b-2 border-gray-200 animate-pop font-bold text-gray-700">
                                {item.text}
                            </button>
                        ))}
                    </div>

                    {isCorrect && (
                        <div className="animate-pop my-4 p-4 bg-green-100 rounded-xl border border-green-300 text-center shadow-lg">
                            <h3 className="text-green-800 font-bold text-xl mb-1">Correct! ðŸŽ‰</h3>
                            <button onClick={nextLevel} className="bg-green-600 text-white px-8 py-2 rounded-full font-bold shadow hover:bg-green-700 mt-2">Next</button>
                        </div>
                    )}

                    <div className="mt-4 flex flex-wrap gap-2 justify-center">
                        {bank.map(item => (
                            <button key={item.id} onClick={() => handleBankClick(item)} className="zh-text bg-white px-4 py-3 rounded-xl shadow border border-amber-100 hover:bg-amber-50 text-lg font-bold text-gray-800">
                                {item.text}
                            </button>
                        ))}
                    </div>
                </div>
            );
        };

        // 4. TYPE IT MODE
        const TypeItMode = ({ words }) => {
            const [index, setIndex] = useState(0);
            const [input, setInput] = useState('');
            const [status, setStatus] = useState('typing'); // typing, correct, wrong

            const word = words[index];

            const handleSubmit = (e) => {
                e.preventDefault();
                if (input.trim() === word.hanzi) {
                    setStatus('correct');
                    speak(word.hanzi);
                } else {
                    setStatus('wrong');
                    speak('Try again');
                }
            };

            const next = () => {
                setIndex((prev) => (prev + 1) % words.length);
                setInput('');
                setStatus('typing');
            };

            return (
                <div className="w-full max-w-sm mx-auto mt-10 text-center">
                     <div className="bg-white p-8 rounded-3xl shadow-lg border border-amber-100 mb-8 relative overflow-hidden">
                        <div className="absolute top-0 left-0 w-full h-2 bg-amber-400"></div>
                        <h2 className="text-3xl font-bold text-gray-800 mb-2">{word.en}</h2>
                        <p className="text-gray-400 font-medium">{word.ru}</p>
                    </div>

                    <form onSubmit={handleSubmit}>
                        <input 
                            type="text" 
                            value={input}
                            onChange={(e) => { setInput(e.target.value); setStatus('typing'); }}
                            placeholder="Type Hanzi..."
                            className={`zh-text w-full p-4 text-center text-4xl rounded-2xl border-2 outline-none transition shadow-inner
                                ${status === 'correct' ? 'border-green-500 bg-green-50 text-green-900' : 'border-gray-200 focus:border-amber-400'}
                                ${status === 'wrong' ? 'border-red-400 bg-red-50' : ''}
                            `}
                        />
                        {status === 'correct' && (
                            <div className="mt-6 animate-pop">
                                <div className="text-green-600 font-bold mb-3 text-lg">{word.pinyin}</div>
                                <button type="button" onClick={next} className="bg-amber-500 text-white px-10 py-3 rounded-full font-bold shadow-lg hover:scale-105 transition">Next</button>
                            </div>
                        )}
                         {status === 'wrong' && <div className="mt-4 text-red-500 font-bold animate-pulse">Answer: {word.hanzi}</div>}
                         {status === 'typing' && <button type="submit" className="mt-6 text-amber-400 font-bold text-sm tracking-wider uppercase">Press Enter to Check</button>}
                    </form>
                </div>
            );
        };

        // 5. LIST VIEW MODE
        const ListView = ({ words }) => (
            <div className="w-full max-w-md mx-auto mt-2 pb-20">
                <div className="bg-white rounded-2xl shadow-sm overflow-hidden border border-amber-100">
                    <div className="bg-amber-50 px-4 py-3 border-b border-amber-100 flex justify-between items-center sticky top-0">
                         <span className="text-xs font-bold text-amber-500 uppercase tracking-wider">{words.length} Words</span>
                         <span className="text-[10px] text-gray-400 font-bold bg-white px-2 py-1 rounded-full border border-gray-100">Tap row to listen</span>
                    </div>
                    <div className="divide-y divide-gray-50 max-h-[70vh] overflow-y-auto no-scrollbar">
                        {words.map(w => (
                            <div 
                                key={w.id} 
                                onClick={() => speak(w.hanzi)}
                                className="p-4 hover:bg-amber-50 transition-colors cursor-pointer flex justify-between items-center group"
                            >
                                <div>
                                    <div className="flex items-baseline gap-2">
                                        <div className="zh-text text-xl font-bold text-gray-800 group-hover:text-amber-600 transition-colors">{w.hanzi}</div>
                                        <div className="text-xs text-gray-400 font-mono">{w.pinyin}</div>
                                    </div>
                                </div>
                                <div className="text-right max-w-[50%]">
                                    <div className="text-sm font-bold text-gray-700 leading-tight">{w.en}</div>
                                    <div className="text-xs text-gray-400 mt-0.5">{w.ru}</div>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            </div>
        );

        // --- MAIN APP COMPONENT ---
        const App = () => {
            const [currentDeckId, setCurrentDeckId] = useState('L01-L04');
            const [mode, setMode] = useState('flashcard');
            const [mastery, setMastery] = useState({});
            const [showDeckMenu, setShowDeckMenu] = useState(false);

            // Load progress
            useEffect(() => {
                const saved = localStorage.getItem('hsk1_mastery');
                if (saved) setMastery(JSON.parse(saved));
            }, []);

            const updateMastery = (id, score) => {
                const newMastery = { ...mastery, [id]: (mastery[id] || 0) + score };
                setMastery(newMastery);
                localStorage.setItem('hsk1_mastery', JSON.stringify(newMastery));
            };

            const resetProgress = () => {
                if(confirm("Reset all progress?")) {
                    setMastery({});
                    localStorage.removeItem('hsk1_mastery');
                }
            };

            // Filter Words based on Deck
            const activeWords = useMemo(() => {
                const deckConfig = DECKS.find(d => d.id === currentDeckId);
                if (deckConfig.range === 'ALL') return RAW_DATA;
                return RAW_DATA.filter(w => deckConfig.range.includes(w.lesson));
            }, [currentDeckId]);

            const currentDeckLabel = DECKS.find(d => d.id === currentDeckId).label;

            const NavBtn = ({ id, icon, label }) => (
                <button 
                    onClick={() => setMode(id)} 
                    className={`flex flex-col items-center gap-1 p-2 transition-all ${mode === id ? 'text-amber-600' : 'text-gray-300 hover:text-amber-400'}`}
                >
                    <i className={`ph-fill ${icon} text-2xl ${mode === id ? 'scale-110' : ''}`}></i>
                    <span className="text-[10px] font-bold uppercase">{label}</span>
                </button>
            );

            return (
                <div className="min-h-screen flex flex-col bg-amber-50 pb-24 relative overflow-hidden">
                    
                    {/* Header */}
                    <header className="bg-white shadow-sm sticky top-0 z-20 px-4 py-3 flex justify-between items-center rounded-b-2xl">
                        <div className="flex items-center gap-2 text-amber-600">
                            <div className="w-12 h-10 bg-amber-100 rounded-lg flex items-center justify-center">
                                <span className="font-extrabold text-sm">HSK2</span>
                            </div>
                            <div>
                                <h1 className="font-bold text-gray-800 leading-tight">Word Master</h1>
                                <p className="text-[10px] font-bold text-amber-500 uppercase tracking-wide">{currentDeckLabel}</p>
                            </div>
                        </div>
                        <div className="flex gap-2">
                             <button onClick={resetProgress} className="w-8 h-8 rounded-full bg-gray-50 text-gray-400 flex items-center justify-center">
                                <i className="ph-bold ph-trash"></i>
                            </button>
                            <button onClick={() => setShowDeckMenu(!showDeckMenu)} className="w-8 h-8 rounded-full bg-amber-100 text-amber-600 flex items-center justify-center shadow-sm active:scale-95 transition">
                                <i className="ph-bold ph-folders"></i>
                            </button>
                        </div>
                    </header>

                    {/* Deck Menu Overlay */}
                    {showDeckMenu && (
                        <div className="absolute top-16 right-4 z-30 bg-white rounded-2xl shadow-xl border border-amber-100 p-2 w-48 animate-pop origin-top-right">
                            <div className="text-xs font-bold text-gray-400 px-3 py-2 uppercase">Select Deck</div>
                            {DECKS.map(deck => (
                                <button 
                                    key={deck.id}
                                    onClick={() => { setCurrentDeckId(deck.id); setShowDeckMenu(false); }}
                                    className={`w-full text-left px-3 py-2 rounded-lg text-sm font-bold mb-1 transition ${currentDeckId === deck.id ? 'bg-amber-100 text-amber-700' : 'text-gray-600 hover:bg-gray-50'}`}
                                >
                                    {deck.label}
                                </button>
                            ))}
                        </div>
                    )}

                    {/* Content */}
                    <main className="flex-grow px-4 py-6 relative z-10">
                        {mode === 'flashcard' && <FlashcardMode words={activeWords} onUpdateMastery={updateMastery} />}
                        {mode === 'quiz' && <QuizMode words={activeWords} />}
                        {mode === 'typeit' && <TypeItMode words={activeWords} />}
                        {mode === 'sentence' && <SentenceBuilder words={activeWords} />}
                        {mode === 'list' && <ListView words={activeWords} />}
                    </main>

                    {/* Bottom Nav */}
                    <nav className="fixed bottom-0 left-0 w-full bg-white border-t border-amber-100 pb-safe px-2 py-2 flex justify-around items-center shadow-[0_-4px_20px_rgba(0,0,0,0.05)] z-50 rounded-t-3xl">
                        <NavBtn id="flashcard" icon="ph-cards" label="Cards" />
                        <NavBtn id="list" icon="ph-list-dashes" label="List" />
                        <NavBtn id="quiz" icon="ph-question" label="Quiz" />
                        <NavBtn id="sentence" icon="ph-squares-four" label="Build" />
                        <NavBtn id="typeit" icon="ph-keyboard" label="Type" />
                    </nav>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
